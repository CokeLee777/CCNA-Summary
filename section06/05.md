# IP 주소 클래스
## How Internet Addressing Was Meant to Work

인터넷 주소가 원래 어떻게 작동하도록 되어있었나?

IPv4가 처음 구상될 당시에는 향후 인터넷으로 무슨 일이 벌어질지 설계자들도 전혀 예상하지 못했다. 사용량이 폭발적으로 증가하여 모든 사람이 인터넷을 사용하게 되고 모두에게 IP주소가 필요하게 될 줄 몰랐던 것이다. 즉, IPv4는 당시 시대상에 맞춰 설계되었다.

최초에 설계된 IPv4의 작동방식은 다음과 같다. 인터넷 통신을 원하는 어떤 기업이 일정 범위의 IP주소를 신청하였다. IP주소의 글로벌 할당은 IANA(Internet Assigned Numbers Authority)에서 담당하고 있다.

하지만, IPv4가 처음 만들어졌을 당시의 설계자들은 향후 인터넷이 얼마나 거대해질지 예측하지 못했다. 그래서 주소 공간을 충분히 확보하지 않았던 것이다. IPv4 주소가 모든 호스트의 인터넷 통신이 가능할 만큼 많지 않았던 것이다. 즉, IPv4 주소가 다 소진된 것이다.

**장기적인 해결책은 훨씬 더 큰 주소 공간을 가진 IPv6** 이었다. IPv4는 32비트 주소이고, IPv6는 128비트 주소이기 때문이다. 현재는 Network Address Translation, 즉 NAT를 통한 개인 IP주소가 대부분의 기업 네트워크에서 차선책으로 활용되고 있다. IPv6는 장기적인 해결책이긴 하지만 **아직은 NAT를 통한 개인 IP주소가 더 보편적으로 사용되고 있다**는 뜻이다.

## Subnet Size

- 네트워크의 호스트 부분이 커질수록, 더 많은 호스트를 보유할 수 있다.
- 만약 서브넷 마스크가 /8 이라면, 호스트에게 할당할 공간이 24비트가 남게 된다.
- 만약 서브넷 마스크가  /24 이라면, 호스트에게 할당할 공간이 8비트밖에 남지 않는다.
## Class A

- 인터넷 승인 기관은 글로벌 IPv4 주소 공간을 별도의 클래스로 나눈다.
- Class A 주소는 **호스트가 매우 많은 네트워크**에 배정된다.
	- 즉, Class A 주소는 작은 네트워크 부분과 큰 호스트 부분으로 구성된다는 의미이다.
- Class A 주소의 **최상위 비트, 즉 첫 번째 비트**는 항상 `0`으로 설정된다.
- 기본 서브넷 마스크는 **/8** 이다.
- 유효한 네트워크 주소는 1(00000001).0.0.0 - 126(01111110).0.0.0 /8 이다.
- Class A 주소는 126개의 네트워크와 네트워크당 16777214개의 호스트를 가질 수 있다.
### Reserved Class A Addresses

- `0.0.0.0/8` 은 **현재 네트워크**를 의미하는 예약된 주소이다.
- 0.0.0.1 - 0.255.255.255는 예약된 주소로 호스트에 배정할 수 있는 유효한 주소가 아니다.
- Class A 주소의 `127.0.0.0/8`은 **로컬 컴퓨터에서 테스트하기 위한 목적의 루프백 주소로 예약된 주소**이다.
	- 127.0.0.1 - 127.255.255.255는 호스트에 배정할 수 있는 유효한 주소가 아니다.
	- 주소가 부족하다면서 왜 이런짓을 하냐고 물어볼 수 있는데, IPv4의 설계자들은 주소가 소진될 것이라고 예상하지 못했기 때문이라고 생각하면 된다.
## Subnetting

- IP 주소를 할당받은 회사가 Class A의 유효한 호스트 주소 개수인 16777214개의 호스트를 하나의 네트워크로 넣진 않았을 것이다, 이것은 성능면에서나 보안적인 측면에서도 최악일 것이다.
- 회사는 큰 /8 범위를 더 작은 서브넷으로 나누고 이 서브넷을 여러 다른 사무실에 있는 다양한 부서들로 배정할 것이다.
	- 예를들어 만약 그들이 15.0.0.0/8 을 받았다면, 그들은 뉴욕에 있는 영업 부서에 15.0.1.0/24를 할당하고, 15.0.2.0/24는 회계 부서에 할당할 수 있다. 또한 15.0.9.0/24는 보스턴 영업 부서에 할당할 수 있다.
- 이렇게 **서브넷으로 범위를 쪼개는 것**을 `Subnetting`이라고 한다.
## Class B

- Class B 주소는 **중형 ~ 대형 네트워크**에 할당된다.
- Class B 주소는 **첫 두 개의 비트**가 항상 `1 0` 으로 시작한다.
- 기본 서브넷 마스크는 **/16** 이다.
- 유효한 네트워크 주소 범위는 128(10000000).0.0.0 - 191(10111111).255.0.0 /16 이다.
- Class B 주소는 16384개의 네트워크와 네트워크당 65534개의 호스트를 가질 수 있다.
- Class B 주소는 보통 실제 환경에서 서브네팅 하여 사용한다.
## Class C

- Class C 주소는 **소형 네트워크**에 쓰인다.
- Class C 주소는 **첫 세 개의 비트**가 항상 `1 1 0` 으로 시작한다.
- 기본 서브넷 마스크는 **/24** 이다.
- 유효한 네트워크 주소 범위는 192(11000000).0.0.0 - 223(11011111).255.255.0 /24이다.
- Class C 주소는 2097152개의 네트워크와 네트워크당 254개의 호스트를 가질 수 있다.
- Class C 주소 또한 실제 환경에서 서브네팅이 가능하고, 이미 충분히 작기 때문에 있는 그대로를 사용하기도 한다.
## Private Addresses

- 각각의 클래스에는 **예약된 개인 주소**의 범위도 존재한다.
	- 이 주소들은 다른 예약된 주소들과 달리 호스트에 배정이 가능하지만 공공 인터넷상에 라우팅은 할 수 없다.
	- 이 주소들은 원래 인터넷 연결이 없어야 하는 폐쇄된 개인 네트워크를 위해 설계되었다.
- 클래스별로 개인 주소로 사용되는 범위는 다음과 같다.
	- Class A: 10.0.0.0 - 10.255.255.255
	- Class B: 172.16.0.0 - 172.31.255.255
	- Class C: 192.168.0.0 - 192.168.255.255
## Class D

- Class D 주소는 예약된 **멀티캐스트 주소**이다.
- Class D 주소는 첫 네 개의 비트가 항상 `1 1 1 0` 으로 시작한다.
- **기본 서브넷 마스크는 없다.**
- Class D 주소는 **호스트에 배정될 수 없다.**
- 유효한 주소 범위는 224(11100000).0.0.0 - 239(11101111).255.255.255 이다.
## Class E

- Class E 주소는 **실험용 또는 미래의 사용 목적**으로 예약된 주소이다.
- Class E 주소는 첫 네 개의 비트가 항상 `1 1 1 1` 으로 시작한다.
- **기본 서브넷 마스크는 없다.**
- Class E 주소는 호스트에 배정될 수 없다.
- 유효한 주소 범위는 240(11110000).0.0.0.0 - 255(11111111).255.255.255 이다.
- `255.255.255.255`는 이 네트워크의 **브로드캐스트 주소**이다.
