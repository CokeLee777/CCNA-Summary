# Private IP Addresses

사설 IP 주소 범위는 IEFT(Internet Engineering Task Force)가 **RFC 1918**로 문서화하였다. RFC는 **Requests For Comments**의 약자이다. 따라서 IETF가 문서를 공개할 때 RFC 번호로 공개한다. 그러면 다른 엔지니어가 문서에 논평을 하거나 개선사항을 제안할 수 있다.

하지만 RFC는 여전히 **최종 표준**이기도 하다. 따라서 오늘날 사설 IP 주소 지정의 최종 기준은 **RFC 1918**이다. 현재 거의 모든 기술들이 RFC를 가지고 있지만 보통 사람들이 아는 RFC는 사설 IP 주소에 대한 기준인 RFC 1918이다.

다시 본래 인터넷이 설계되었던 방식의 관점에서 설명하면, 사설 IP 주소는 원래 인터넷에 연결되면 안되는 호스트를 위한 주소였다. 왜냐하면 조직에서 인터넷에 연결되어서는 안되는 일부 네트워크가 분명히 존재하는데, 해당 호스트를 위해서 공공 IP 주소에 대한 비용을 들이고 싶지는 않을 것이다. 따라서 비용을 절약하기 위해서는 사설 IP 주소를 사용하면 된다.

이를 통해 얻을 수 있는 또 다른 이점은 그 호스트가 인터넷에 연결되지 않았으니 호스트를 더욱 안전하게 보호할 수 있고, 인터넷에서 통신할 수 없도록 차단할 수 있다는 것이다. 그렇다면 어떤 경우에 이러한 주소가 필요할까? 은행과 같이 보안이 중요한 환경에서 많이 사용될 것이다.

사설 주소는 각 클래스 A, B, C에 범위가 존재한다.
클래스 A
- 10.0.0.0 ~ 10.255.255.255
	- 10.0.0.0/8
	- 10.0.0.0 255.0.0.0
클래스 B
- 172.16.0.0 ~ 172.31.255.255
	- 172.16.0.0/12
	- 172.16.0.0 255.240.0.0
클래스 C
- 192.168.0.0 ~ 192.168.255.255
	- 192.168.0.0/16
	- 192.168.0.0 255.255.0.0
## IPv4 Global Address Space Problem

IPv4의 설계자들은 인터넷이 얼마나 커질지를 알지 못 했기 때문에 이들이 처음에 IPv4를 설계했을 때 그들은 43억 개의 주소면 충분하고도 남을 것이라 생각했다.

하지만 문제는 이제 43억 개의 주소로는 턱없이 부족해지게 되었고 프로토콜의 주소할당방식이 효율적이지 않다는 또 다른 문제도 있었다. 

그래서 IPv4 주소 공간은 오늘날 인터넷에서 실제로 필요한 주소 개수를 감당할 수가 없다.
## IPv6

그래서 이들은 꽤 오래 전인 1980년대 후반에 주소가 부족할 것이라는 사실을 깨닫고 문제에 대한 해결책을 찾기 시작했다. 그리고 1990년대에 이에 대한 솔루션으로 IPv6가 개발되었다.

IPv6 주소는 형식이 다른데 IPv4 주소가 32비트인 데 반면 IPv6는 128비트 길이의 주소이다. 그러나 IPv4보다 단순히 네 배 더 큰 주소 공간을 가진 것이 아니라 비트를 더할 때마다 두 배로 늘기 때문에 실제로는 그보다 기하급수적으로 더 크다. IPv6 주소 공간은 IPv4 주소 공간의 7.9x10의 28제곱 배 만큼 크다. 따라서 IPv6에는 엄청난 양의 주소가 사용 가능하고 다시는 주소가 부족할 일이 없게끔 개발이 되었다.
### IPv6 Problem and NAT

하지만 IPv4에 문제가 있었던 것처럼 IPv6에도 문제가 있었다. 주요 문제는 IPv4에서 IPv6으로의 원활한 마이그레이션 방법이 없다는 것이다. 조직의 경우에는 호스트가 이미 배포되어있고 IPv4 주소도 가지고 있으며 모든 IPv4 주소 지정 설계를 완료했다면, 쉽지 않을 것이다. 주소 형식이 다르기 때문에 스위치 누르듯 한 번에 IPv6 주소로 변환할 수가 없는 것이다. IPv4와 완벽하게 역호환되는 게 아니다.

따라서 이미 존재하고 있는 조직의 입장에서 IPv4에서 IPv6으로의 마이그레이션은 상당히 어려운 일이다. 그래서 이 때문에 네트워크 주소 변환(NAT)이 모든 사람들이 IPv6으로 전환하기 전의 임시 방편으로 구현되었다. 조직은 공공 환경에서 연결이 불가능해 공공 인터넷에서 작동이 되지 않는 내부 네트워크에서 RFC 1918 사설 IP 주소를 사용하는데, 그 주소들이 나가는 길에 외부에서 공공 IP 주소로 변환되도록 할 수 있다. 따라서 내부에서 사설 IP주소를 사용하는 경우 공공 인터넷에서 다른 사람과 통신할 때마다 트래픽이 도달할 때 공공 IP주소에서 오는 것처럼 보이기 때문에 트래픽을 다시 보낼 수 있는 것이다. 그리고 내부의 많은 호스트, 즉 이러한 사설 IP주소를 사용하는 많은 내부 호스트들은 외부에 소수, 혹은 유일한 공인 IP주소를 공유할 수 있다.
## Today's Networks

2000년대 초, 많은 업계 전문가들은 IPv4 주소 부족으로 인해 모든 사람이 몇 년 안에 IPv6을 사용할 것이라고 예측했다. 하지만 실제로는 그렇게 되지 않았다.

그리고 오늘날의 네트워크에서 대부분의 기업은 NAT와 함께 RFC 1918 IPv4 주소를 사용하고 있다. RFC 1918은 기본적으로 내부 호스트를 숨겨주는 보안상의 이점이 존재한다. 추가적으로 네트워크 엔지니어들은 IPv6보다는 IPv4에 더 경험이 많다.

그러나 IPv6도 흔히 사용이 되고 있다. 주로 서비스 제공자 네트워크에서 많이 사용된다. 대부분의 서비스 제공 업체 네트워크는 IPv4와 IPv6을 모두 지원한다. 그리고 휴대전화 통신사에서도 사용되고 있는데, 많은 휴대전화가 존재할 뿐만아니라 비교적 최신 기술이기 때문에 이미 IPv4 주소 부족 문제가 만연하고 IPv6가 사용 가능할 때 개발되었다.

여분의 공공 IPv4 주소는 2011년에 이미 소진되었기 때문에 여전히 IPv6가 미래이다. 오늘날 대부분의 기업들은 아직 RFC 1918 주소와 NAT를 사용하고 있지만 점차 IPv6로 옮겨갈 것이다.

그 외에도 서브네팅은 여전히 이해하고 있어야한다. 왜냐하면 내부에서 사설 IP 주소를 사용하는 경우에도 역시 서브네팅이 필요하기 때문이다. 그리고 작업할 전체 사설 IP 주소공간이 있기 때문에 오늘날의 실제 기업들은 종단 호스트에 /24 서브넷, 지점간 링크에 /30, 루프백에 /32를 사용하는 것이 일반적이다.

VLSM은 만일 조직이 내부에서도 공공 IP 주소를 사용하는 경우에 종종 볼 수 있는데, 이미 공공 IP주소에 비용을 지불하고 있으니 주소를 낭비하고 싶지 않을 것이다. 이렇게 된다면 더 복잡한 VLSM이 사용된다.